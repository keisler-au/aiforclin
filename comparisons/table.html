<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Comparison Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="/assets/css/comparison-table.css"
    />
    <script src="/assets/js/comparison-table.js"></script>
  </head>
  <body class="bg-[var(--navy-deepest)] text-white">
    <div class="container mx-auto sm:p-6 lg:p-8">
      <main id="main" class="space-y-12">
        <!-- Plan selection + filters -->
        <section aria-labelledby="select-plans-heading">
          <div
            class="flex items-start sm:items-center justify-between gap-3 mb-3"
          >
            <div>
              <h2
                id="select-plans-heading"
                class="text-xl text-[var(--text-secondary)] font-semibold"
              >
                Select plans to see a side-by-side comparison
              </h2>

              <!-- Active filter chips summary -->
              <nav aria-label="Active filters">
                <ul id="active-chips" class="mt-2 flex flex-wrap gap-2"></ul>
              </nav>
            </div>

            <!-- Filters toolbar -->
            <div class="flex items-center gap-3">
              <p
                id="match-pill"
                class="hidden sm:inline-flex items-center gap-2 text-sm text-[var(--text-secondary)]"
                aria-live="polite"
              >
                <span id="match-count" class="font-semibold">0</span> matches
              </p>

              <button
                id="filter-btn"
                type="button"
                aria-haspopup="dialog"
                aria-controls="filter-dialog"
                aria-expanded="false"
                class="group inline-flex items-center gap-2 rounded-lg border border-[var(--primary-gold)] bg-[var(--gold-lighter)] px-3 py-2 text-sm font-semibold text-[var(--navy-deepest)] hover:bg-[var(--primary-gold)] hover:text-white transition"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  class="h-5 w-5"
                  aria-hidden="true"
                >
                  <path
                    d="M3.25 4A.75.75 0 0 1 4 3.25h12a.75.75 0 0 1 .53 1.28l-4.78 4.78v4.19a.75.75 0 0 1-.33.62l-2.5 1.67A.75.75 0 0 1 7.5 15.5V9.31L2.72 4.53A.75.75 0 0 1 3.25 4Z"
                  />
                </svg>
                Filters
                <span
                  id="active-count"
                  class="ml-1 hidden rounded-full flex items-center justify-center w-5 h-5 p-0.5 bg-[var(--navy-deepest)] text-xs font-bold text-white group-hover:bg-[var(--gold-lighter)] group-hover:text-[var(--primary-gold)]"
                  >0</span
                >
              </button>
            </div>
          </div>

          <p
            id="eligible-pill"
            class="hidden text-sm text-gray-600 mb-2"
            aria-live="polite"
          >
            <span id="eligible-extra" class="font-semibold"></span>
          </p>

          <!-- Selectable items as a list -->
          <ul
            id="selectable-items-container"
            class="flex flex-wrap gap-3"
            role="list"
          >
            <!-- plan <li> injected here -->
          </ul>
        </section>

        <!-- Comparison table -->
        <section aria-labelledby="comparison-heading">
          <div
            id="comparison-table-container"
            class="bg-[var(--gold-lighter)] border-[var(--primary-gold)] rounded-xl shadow-lg overflow-x-auto"
          >
            <!-- table injected here -->
          </div>
        </section>
      </main>

      <!-- Optional footer -->
      <footer class="sr-only">
        <p>End of comparison tool.</p>
      </footer>
    </div>

    <!-- Filters Modal as native dialog -->
    <dialog
      id="filter-dialog"
      class="w-full max-w-3xl rounded-2xl bg-[var(--gold-lighter)] shadow-2xl border border-[var(--primary-gold)] p-0"
    >
      <form method="dialog" class="flex flex-col max-h-[80vh]">
        <header
          class="p-5 border-b border-[var(--primary-gold)] flex items-center justify-between text-[var(--navy-deepest)] font-semibold"
        >
          <h3 id="filter-title" class="text-lg">Filter options</h3>
          <div class="flex items-center gap-2">
            <button type="button" id="clear-filters" class="text-sm">
              Clear all
            </button>
            <button
              id="close-filters"
              class="inline-flex items-center gap-2 rounded-lg font-semibold text-sm transition-all-smooth px-4 py-2 border border-[var(--navy-deepest)] hover:bg-[var(--navy-deepest)] hover:text-white"
            >
              Close
            </button>
          </div>
        </header>

        <div class="p-5 grid grid-cols-1 gap-4 overflow-auto">
          <fieldset class="border border-[var(--primary-gold)] rounded-lg p-3">
            <legend class="px-1 text-sm font-medium text-[var(--navy-deepest)]">
              Features
            </legend>

            <div class="mt-2 flex flex-wrap gap-2">
              <label class="flex items-center">
                <input
                  type="checkbox"
                  data-filter-group="appCompliance"
                  value="yes"
                  class="peer hidden"
                />
                <span
                  class="cursor-pointer rounded-full inline-flex items-center gap-1 bg-gray-100 border border-gray-200 px-3 py-1 text-sm text-[var(--navy-deepest)] hover:bg-gray-200 peer-checked:text-white peer-checked:border-[var(--navy-deepest)] peer-checked:bg-[var(--navy-deepest)] duration-300 ease-in-out"
                >
                  APP Compliance
                </span>
              </label>
              <label class="flex items-center">
                <input
                  type="checkbox"
                  data-filter-group="mobileCompatible"
                  value="yes"
                  class="peer hidden"
                />
                <span
                  class="cursor-pointer rounded-full inline-flex items-center gap-1 bg-gray-100 border border-gray-200 px-3 py-1 text-sm text-[var(--navy-deepest)] hover:bg-gray-200 peer-checked:text-white peer-checked:border-[var(--navy-deepest)] peer-checked:bg-[var(--navy-deepest)] duration-300 ease-in-out"
                >
                  Mobile Compatible
                </span>
              </label>
              <label class="flex items-center">
                <input
                  type="checkbox"
                  data-filter-group="freeMembership"
                  value="yes"
                  class="peer hidden"
                />
                <span
                  class="cursor-pointer rounded-full inline-flex items-center gap-1 bg-gray-100 border border-gray-200 px-3 py-1 text-sm text-[var(--navy-deepest)] hover:bg-gray-200 peer-checked:text-white peer-checked:border-[var(--navy-deepest)] peer-checked:bg-[var(--navy-deepest)] duration-300 ease-in-out"
                >
                  Free Level of Membership Available
                </span>
              </label>
              <label class="flex items-center">
                <input
                  type="checkbox"
                  data-filter-group="telehealth"
                  value="yes"
                  class="peer hidden"
                />
                <span
                  class="cursor-pointer rounded-full inline-flex items-center gap-1 bg-gray-100 border border-gray-200 px-3 py-1 text-sm text-[var(--navy-deepest)] hover:bg-gray-200 peer-checked:text-white peer-checked:border-[var(--navy-deepest)] peer-checked:bg-[var(--navy-deepest)] duration-300 ease-in-out"
                >
                  Telehealth
                </span>
              </label>
              <label class="flex items-center">
                <input
                  type="checkbox"
                  data-filter-group="headphonesCompatible"
                  value="yes"
                  class="peer hidden"
                />
                <span
                  class="cursor-pointer rounded-full inline-flex items-center gap-1 bg-gray-100 border border-gray-200 px-3 py-1 text-sm text-[var(--navy-deepest)] hover:bg-gray-200 peer-checked:text-white peer-checked:border-[var(--navy-deepest)] peer-checked:bg-[var(--navy-deepest)] duration-300 ease-in-out"
                >
                  Headphones Compatible
                </span>
              </label>
            </div>
          </fieldset>
        </div>
      </form>
    </dialog>
  </body>
</html>
